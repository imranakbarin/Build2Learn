  {% extends "layout.html" %}
        {% block title %}
       Chennai Zonal Stats

        {% endblock %}
        {% block content %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
<h3 class="display-4">Chennai</h3>
<small class="text-muted">Chennai Street wise report available <a href="{{ url_for('chennaistreetwise') }}">here</a></small>
<p><small class="text-muted">Cases as of {{formatteddate}}</small></p>
<div class="table-responsive">    
 <table class="table table-striped table-sm">
  <thead class="thead-light">
    <tr>
      <th scope="col">ZNo</th>
      <th scope="col" >ZoneName</th>
      <th scope="col">Confirm</th>
      <th scope="col">Active</th>
      <th scope="col">Cured</th>
      <th scope="col">Deaths</th>
    </tr>
  </thead>
  <tbody>
   
     {% for zones in chennaidata %}
    
      <tr>
      <td>{{zones['zoneNo']}}</td>
      <th scope="row">{{(zones['zoneName'] | capitalize) }}</th>
      <td class="text-secondary">{{zones['confirmedCases'] | comafy }}</td>
      <td class=""><b>{{zones['hospitalized'] | comafy }}</b></td>
      <td class="text-success"><b>{{zones['recovered'] | comafy }}</b></td>
      <td class="text-danger"><b>{{zones['deceased'] | comafy }}</b></td>
      </tr>
       
     {%- endfor %}
  </div>
  </tbody>


</table>

<hr>
   <div class="">
    <button type="active" class="btn btn-info btn-xs align-left" onclick="myFunction('active')">Active</button>
    <button type="recovered" class="btn btn-success btn-xs" onclick="myFunction('recovered')">Recovered</button>
    <button type="deceased" class="btn btn-danger btn-xs" onclick="myFunction('deceased')">Deceased</button>
</div>

    <canvas id="barChart"></canvas>


     <script>
     //      var colours =['#00429d', '#325da9', '#4e78b5', '#6694c1', '#80b1cc', '#9dced6', '#c0eade', '#ffffe0', '#ffdac4', '#ffb3a7', '#fb8a8c', '#eb6574', '#d5405e', '#b81b4a', '#93003a']

      var colours =['#4e4a7f', '#555887', '#5d668f', '#657396', '#6e819d', '#798fa3', '#859da7', '#e59348', '#97e5c3', '#b8cab0', '#ceaf9d', '#db938c', '#e3767c', '#e3586f', '#cf4969']
      // get bar chart canvas
      var mychart = document.getElementById("barChart").getContext("2d");
       var myChart = new Chart(mychart,{
          type: 'bar',
          data:{ labels: {{zones_list | safe}},
          datasets: [{ label: 'No of Active Cases',data: {{active_list}},
          backgroundColor: colours
          
            }]
          },

    options: {
        legend: {
            display: false,
            labels: {
                fontColor: 'rgb(255, 99, 132)'
            },
        
        },title: {
            display: true,
            text: 'Chennai Active Cases'
        },
        responsive:true
    }
    });

    function myFunction(flag) {
	//		var zero = Math.random() < 0.2 ? true : false;
      var datasetA;
      if (flag == 'active') {
        //  block of code to be executed if condition1 is true
         datasetA = {{active_list}}
      } else if (flag == 'recovered') {
        //  block of code to be executed if the condition1 is false and condition2 is true
        datasetA = {{recovered_list}}
      } else {
        datasetA = {{deceased_list}}
      }
        var case_type = flag.charAt(0).toUpperCase() + flag.slice(1)
		    myChart.config.data.datasets[0].data = datasetA;
        myChart.config.data.datasets[0].label = case_type + " cases"
        myChart.config.options.title.text = "Chennai "+ case_type +" Cases"
				myChart.update();
		};
    </script>
<BR>
    <p class="bg-light text-muted">Stay home, stay safe â€“ the only cure found till now for coronavirus.</p>
     {% endblock %}